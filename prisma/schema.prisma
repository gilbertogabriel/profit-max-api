generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model USUARIO {
  IDUSUARIO    Int            @id @default(autoincrement())
  NOME         String
  SENHA        String
  EMAIL        String         @unique
  INVESTIMENTO INVESTIMENTO[]
  ACESS_CODE   ACESS_CODE[]
  TRANSACTIONS TRANSACTIONS[]
  TOKEN        TOKEN[]
  DELETED_AT   DateTime?
}

model TOKEN {
  IDTOKEN   Int      @id @default(autoincrement())
  TOKEN     String
  DTCRIACAO DateTime @default(now())
  DTEXPIRA  DateTime @default(now())
  IDUSUARIO Int
  USUARIO   USUARIO  @relation(fields: [IDUSUARIO], references: [IDUSUARIO])
}

model INVESTIMENTO {
  IDINVESTIMENTO Int       @id @default(autoincrement())
  NOME           String
  VALOR          Float
  PRECOMEDIO     Float
  DTCRIACAO      DateTime  @default(now())
  DTUPDATE       DateTime?
  DTDELETE       DateTime?
  QUANTIDADE     Int
  USUARIO        USUARIO   @relation(fields: [IDUSUARIO], references: [IDUSUARIO])
  IDUSUARIO      Int
  PROFIT         PROFIT[]
}

model PROFIT {
  IDPROFIT       Int          @id @default(autoincrement())
  DTCRIACAO      DateTime     @default(now())
  VALOR          Float
  DESCRICAO      String
  TPPROFIT       Boolean
  CATEGORIA      CATEGORIA    @relation(fields: [IDCATEGORIA], references: [IDCATEGORIA])
  IDCATEGORIA    Int
  INVESTIMENTO   INVESTIMENTO @relation(fields: [IDINVESTIMENTO], references: [IDINVESTIMENTO])
  IDINVESTIMENTO Int
}

model CATEGORIA {
  IDCATEGORIA Int      @id @default(autoincrement())
  DESCRICAO   String
  PROFIT      PROFIT[]
}

model ACESS_CODE {
  IDACESSO   Int      @id @default(autoincrement())
  IDUSUARIO  Int
  USUARIO    USUARIO  @relation(fields: [IDUSUARIO], references: [IDUSUARIO])
  VERIFICADO Boolean  @default(false)
  DTCRIACAO  DateTime @default(now())
  DTEXPIRA   DateTime
  CODE       Int
}

model TRANSACTIONS {
  IDTRANSACTIONS Int      @id @default(autoincrement())
  IDUSUARIO      Int
  USUARIO        USUARIO  @relation(fields: [IDUSUARIO], references: [IDUSUARIO])
  VALOR          Float
  NOME           String
  DESCRICAO      String
  TIPO           String
  DTCRIACAO      DateTime @default(now())
  DTEDICAO       DateTime?
}
